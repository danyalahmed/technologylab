# templates/kubeadm-config.yaml.j2
apiVersion: kubeadm.k8s.io/v1beta4
kind: InitConfiguration
localAPIEndpoint:
  advertiseAddress: {{ ansible_facts['default_ipv4']['address'] }}
nodeRegistration:
  name: {{ inventory_hostname }}
---
apiVersion: kubeadm.k8s.io/v1beta4
kind: ClusterConfiguration
kubernetesVersion: {{ kubernetes_version }}
networking:
  podSubnet: {{ pod_network_cidr }}
---
apiVersion: kubelet.config.k8s.io/v1beta1
kind: KubeletConfiguration
serverTLSBootstrap: true